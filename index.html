<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>How ChatGPT can help beginners use Blender to create CAD</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>AI as a CAD Assistant</h1>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#how">How It Works</a></li>
        <li><a href="#tutorial">Tutorial</a></li>
        <li><a href="#try">Try It</a></li>
        <li><a href="#survey">Feedback</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="about">
      <h2>About the Project</h2>
      <p>This project explores how AI, specifically ChatGPT, can be used as a tutor to help beginners learn CAD using Blender. 
        The goal is to make design more accessible and help users understand the 'why' behind the tools.</p>
    </section>

    <section id="how">
      <h2>How It Works</h2>
      <p>Using ChatGPT and Blender, users are guided through CAD creation. Prompts like “Can you explain what this code does?” 
        provide interactive explanations and feedback, making learning personalized and easier for beginners.</p>
    </section>

    <section id="tutorial">
      <h2>Example Tutorial: Making a Low-Poly Tree</h2>
      <ol>
        <li><strong>User:</strong> “Can you help me make a low-poly tree in Blender step by step?”</li>
        <li><strong>ChatGPT:</strong> “Sure! Step 1: Add a cylinder to represent the trunk...”</li>
        <li><strong>Blender Result:</strong> [Screenshot or GIF of the model].</li>
        <li><strong>Mini Lesson:</strong> “Here, we used scaling to adjust the proportions.”</li>
      </ol>
    </section>

    <section id="try">
      <h2>Try It Yourself</h2>
      <p>Use these prompt templates:</p>
      <ul>
        <li>“Can you explain how to use this tool in Blender?”</li>
        <li>“How can I change this object to be wider?”</li>
        <li>“Where is this menu?”</li>
        <li>“How can I move this object up?”</li>
      </ul>
      //  <div id="chat-box">
        //  <div id="messages">
         //     <!-- Chat messages will be displayed here -->
        //  </div>
        //  <textarea id="user-input" placeholder="Ask ChatGPT a question..." rows="3"></textarea>
        //  <button id="send-btn">Send</button> 
       // </div>
    </section>

    <section id="survey">
      <h2>Feedback & Survey</h2>
      <p>Please take a moment to <a href="https://docs.google.com/forms/d/1NAYDoXZS_5XJcAs88DwznVunbJHkGEYMSh9spMfpjtU/edit" 
                                   target="_blank">fill out this feedback form</a> if you used the tutorial!</p>
    </section>
  </main>

  <footer>
    <p>Created by Agasti Bhaskara | Hosted on GitHub Pages</p>
  </footer>
<script>
  // DOM elements
  const messagesContainer = document.getElementById("messages");
  const userInput = document.getElementById("user-input");
  const sendBtn = document.getElementById("send-btn");

  function addMessage(text, sender) {
    const div = document.createElement('div');
    div.className = sender === 'user' ? 'user-message' : 'bot-message';
    div.textContent = `${sender === 'user' ? 'You' : 'ChatGPT'}: ${text}`;
    messagesContainer.appendChild(div);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  async function sendMessage() {
    const message = userInput.value.trim();
    if (!message) return;

    addMessage(message, 'user');
    addMessage('...loading response...', 'bot');
    userInput.value = '';

    try {
      const response = await fetch(
        'https://aa993d93-7a55-492b-8db4-c946f1faaa02-00-25zptdmdfuo4c.spock.replit.dev/chat', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ message })
        }
      );

      const data = await response.json();
      const botReply = data.reply || 'No reply from server.';
      
      // Remove loading message
      const lastMsg = messagesContainer.querySelector('.bot-message:last-child');
      if (lastMsg && lastMsg.textContent.includes('...loading')) {
        lastMsg.remove();
      }

      addMessage(botReply, 'bot');

    } catch (error) {
      addMessage('Error: ' + error.message, 'bot');
    }
  }

  sendBtn.addEventListener('click', sendMessage);
  userInput.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      sendMessage();
    }
  });
</script>
</body>
</html>
