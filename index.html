<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>How ChatGPT can help beginners use Blender to create CAD</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>AI as a CAD Assistant</h1>
    <nav>
      <ul>
        <li><a href="#about">About</a></li>
        <li><a href="#how">How It Works</a></li>
        <li><a href="#tutorial">Tutorial</a></li>
        <li><a href="#try">Try It</a></li>
        <li><a href="#survey">Feedback</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section id="about">
      <h2>About the Project</h2>
      <p>This project explores how AI, specifically ChatGPT, can be used as a tutor to help beginners learn CAD using Blender. 
        The goal is to make design more accessible and help users understand the 'why' behind the tools.</p>
    </section>

    <section id="how">
      <h2>How It Works</h2>
      <p>Using ChatGPT and Blender, users are guided through CAD creation. Prompts like “Can you explain what this code does?” 
        provide interactive explanations and feedback, making learning personalized and easier for beginners.</p>
    </section>

    <section id="tutorial">
      <h2>Example Tutorial: Making a Low-Poly Tree</h2>
      <ol>
        <li><strong>User:</strong> “Can you help me make a low-poly tree in Blender step by step?”</li>
        <li><strong>ChatGPT:</strong> “Sure! Step 1: Add a cylinder to represent the trunk...”</li>
        <li><strong>Blender Result:</strong> [Screenshot or GIF of the model].</li>
        <li><strong>Mini Lesson:</strong> “Here, we used scaling to adjust the proportions.”</li>
      </ol>
    </section>

    <section id="try">
      <h2>Try It Yourself</h2>
      <p>Use these prompt templates:</p>
      <ul>
        <li>“Can you explain what this script does in Blender?”</li>
        <li>“How can I change this object to be wider?”</li>
      </ul>
        <div id="chat-box">
          <div id="messages">
              <!-- Chat messages will be displayed here -->
          </div>
          <textarea id="user-input" placeholder="Ask ChatGPT a question..." rows="3"></textarea>
          <button id="send-btn">Send</button>
        </div>
    </section>

    <section id="survey">
      <h2>Feedback & Survey</h2>
      <p>Please take a moment to <a href="https://docs.google.com/forms/d/1NAYDoXZS_5XJcAs88DwznVunbJHkGEYMSh9spMfpjtU/edit" 
                                   target="_blank">fill out this feedback form</a> if you used the tutorial!</p>
    </section>
  </main>

  <footer>
    <p>Created by Agasti Bhaskara | Hosted on GitHub Pages</p>
  </footer>
  <script>
  const apiKey = '';

  // DOM elements
  const messagesContainer = document.getElementById("messages");
  const userInput = document.getElementById("user-input");
  const sendBtn = document.getElementById("send-btn");

  // Function to send message to OpenAI API
  async function sendMessageToOpenAI(message) {
    const response = await fetch('https://api.openai.com/v1/chat/completions', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${apiKey}`,
      },
      body: JSON.stringify({
        model: 'gpt-3.5-turbo', // ChatGPT model
        messages: [{ role: 'user', content: message }],
      }),
    });

    const data = await response.json();
    return data.choices[0].message.content.trim(); // Get the response
  }

  // Function to update the chat UI
  function updateChatUI(userMessage, botMessage) {
    // User message
    const userMessageDiv = document.createElement('div');
    userMessageDiv.classList.add('user-message');
    userMessageDiv.textContent = `You: ${userMessage}`;
    messagesContainer.appendChild(userMessageDiv);

    // Bot message
    const botMessageDiv = document.createElement('div');
    botMessageDiv.classList.add('bot-message');
    botMessageDiv.textContent = `ChatGPT: ${botMessage}`;
    messagesContainer.appendChild(botMessageDiv);

    // Scroll to the latest message
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }

  // Send button click event
  sendBtn.addEventListener('click', async () => {
    const userMessage = userInput.value.trim();
    if (!userMessage) return;

    // Update the UI with user message
    updateChatUI(userMessage, '...loading response...');

    // Send message to OpenAI and get the response
    const botResponse = await sendMessageToOpenAI(userMessage);

    // Update the UI with bot response
    updateChatUI(userMessage, botResponse);

    // Clear user input
    userInput.value = '';
  });
</script>

</body>
</html>
